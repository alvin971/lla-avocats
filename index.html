<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLA Avocats - Cabinet d'avocats d'affaires √† Paris</title>
    
    <style>
        /* Variables CSS optimis√©es */
        :root {
            --primary: #1e40af;
            --primary-dark: #1d3a8a;
            --primary-light: #e0e9ff;
            --accent: #f59e0b;
            --gray-1: #f9fafb;
            --gray-2: #e5e7eb;
            --gray-3: #6b7280;
            --gray-4: #374151;
            --gray-5: #111827;
            --white: #fff;
            --success: #10b981;
            --error: #ef4444;
            --shadow: 0 4px 6px -1px rgba(0,0,0,.1);
            --radius: 0.5rem;
            --transition: 0.3s ease;
        }

        /* Reset optimis√© */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            color: var(--gray-5);
            line-height: 1.6;
            background: var(--white);
        }

        /* Typographie */
        h1, h2, h3, h4 {
            font-family: Georgia, serif;
            line-height: 1.2;
            font-weight: 700;
        }
        
        h1 { font-size: clamp(1.875rem, 5vw, 2.5rem); }
        h2 { font-size: clamp(1.5rem, 4vw, 2rem); }
        h3 { font-size: clamp(1.25rem, 3vw, 1.5rem); }

        a {
            color: var(--primary);
            text-decoration: none;
            transition: color var(--transition);
        }
        
        a:hover { color: var(--primary-dark); }

        /* Classes utilitaires optimis√©es */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 500;
            border-radius: var(--radius);
            transition: all var(--transition);
            cursor: pointer;
            border: none;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary-light);
        }

        .btn-accent {
            background: var(--accent);
            color: var(--white);
        }

        .btn-accent:hover {
            background: #d97706;
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }

        .card {
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            transition: all var(--transition);
            overflow: hidden;
        }

        .card:hover {
            box-shadow: 0 10px 15px -3px rgba(0,0,0,.1);
            transform: translateY(-2px);
        }

        .grid {
            display: grid;
            gap: 1.5rem;
        }

        .grid-2 { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
        .grid-3 { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }

        /* Header optimis√© avec menu mobile */
        .header {
            background: var(--white);
            box-shadow: 0 1px 3px rgba(0,0,0,.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
            position: relative;
        }

        .nav-logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gray-5);
            font-family: Georgia, serif;
            z-index: 1001;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: var(--gray-4);
            font-weight: 500;
            position: relative;
            padding: 0.5rem 0;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--primary);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-4);
            z-index: 1001;
            padding: 0.5rem;
        }

        /* Menu mobile */
        @media (max-width: 768px) {
            .nav-menu {
                position: fixed;
                left: -100%;
                top: 0;
                flex-direction: column;
                background: var(--white);
                width: 100%;
                height: 100vh;
                text-align: center;
                transition: left var(--transition);
                padding-top: 5rem;
                gap: 1rem;
                box-shadow: 2px 0 5px rgba(0,0,0,.1);
                z-index: 1000;
            }
            
            .nav-menu.active {
                left: 0;
            }
            
            .nav-link {
                display: block;
                padding: 1rem;
                width: 100%;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            body.menu-open {
                overflow: hidden;
            }
        }

        /* Hero optimis√© */
        .hero {
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--white) 100%);
            padding: 3rem 0;
        }

        .hero-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
        }

        @media (max-width: 768px) {
            .hero-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .hero-buttons {
                justify-content: center;
            }
        }

        .hero-title {
            margin-bottom: 1rem;
        }

        .hero-subtitle {
            font-size: 1.125rem;
            color: var(--gray-3);
            margin-bottom: 2rem;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        /* Expertises optimis√©es */
        .expertise-card {
            padding: 2rem;
            text-align: center;
        }

        .expertise-icon {
            width: 60px;
            height: 60px;
            background: var(--primary-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 1.5rem;
        }

        /* Form optimis√© */
        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--gray-4);
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            border: 1px solid var(--gray-2);
            border-radius: var(--radius);
            background: var(--white);
            transition: all var(--transition);
            font-family: inherit;
        }

        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(30,64,175,.1);
        }

        /* Calendar optimis√© */
        .calendar {
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 1.5rem;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.25rem;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all var(--transition);
            font-size: 0.875rem;
        }

        .calendar-day:hover:not(.disabled) {
            background: var(--primary-light);
        }

        .calendar-day.selected {
            background: var(--primary);
            color: var(--white);
        }

        .calendar-day.disabled {
            color: var(--gray-2);
            cursor: not-allowed;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            gap: 0.5rem;
        }

        .time-slot {
            padding: 0.5rem;
            text-align: center;
            border: 1px solid var(--gray-2);
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all var(--transition);
            font-size: 0.875rem;
        }

        .time-slot:hover {
            border-color: var(--primary);
            background: var(--primary-light);
        }

        .time-slot.selected {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        /* Footer optimis√© */
        .footer {
            background: var(--gray-5);
            color: var(--white);
            padding: 3rem 0 2rem;
            margin-top: 4rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h4 {
            margin-bottom: 1rem;
            color: var(--accent);
        }

        /* Utilities */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--gray-2);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--white);
            padding: 1rem 1.5rem;
            border-radius: var(--radius);
            box-shadow: 0 10px 15px -3px rgba(0,0,0,.1);
            max-width: 400px;
            z-index: 9999;
            animation: slideIn 0.3s ease-out;
        }

        .toast.success { border-left: 4px solid var(--success); }
        .toast.error { border-left: 4px solid var(--error); }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Helpers */
        .text-center { text-align: center; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-8 { margin-top: 2rem; }
        .py-8 { padding-top: 2rem; padding-bottom: 2rem; }
        .py-16 { padding-top: 4rem; padding-bottom: 4rem; }
        .fade-in { animation: fadeIn 0.6s ease-out; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .py-16 { padding-top: 2rem; padding-bottom: 2rem; }
            .container { padding: 0 0.75rem; }
            h1 { font-size: 1.75rem; }
            h2 { font-size: 1.5rem; }
            h3 { font-size: 1.25rem; }
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script type="module">
        'use strict';

        // Configuration et constantes
        const CONFIG = {
            api: {
                delay: 300,
                baseUrl: '/api'
            },
            ui: {
                toastDuration: 5000,
                animationDuration: 300
            }
        };

        const STRINGS = {
            appName: 'LLA Avocats',
            nav: {
                home: 'Accueil',
                expertises: 'Expertises',
                team: 'Notre √©quipe',
                appointment: 'Rendez-vous',
                contact: 'Contact'
            },
            hero: {
                title: 'Cabinet d\'avocats d\'affaires nouvelle g√©n√©ration',
                subtitle: 'Nous accompagnons dirigeants et entrepreneurs avec agilit√©, transparence et expertise pointue.',
                ctaPrimary: 'Prendre rendez-vous',
                ctaSecondary: 'D√©couvrir nos expertises'
            },
            expertises: {
                business: {
                    title: 'Droit des affaires',
                    desc: 'Accompagnement juridique complet pour TPE/PME.'
                },
                public: {
                    title: 'Droit public',
                    desc: 'Contentieux administratifs et march√©s publics.'
                },
                tax: {
                    title: 'Droit fiscal',
                    desc: 'Optimisation fiscale et conseils patrimoniaux.'
                },
                sports: {
                    title: 'Droit du sport',
                    desc: 'Contrats sportifs et droits √† l\'image.'
                }
            }
        };

        // Utilitaires optimis√©s
        const Utils = {
            $: (selector, parent = document) => parent.querySelector(selector),
            $$: (selector, parent = document) => parent.querySelectorAll(selector),
            
            formatDate: date => new Date(date).toLocaleDateString('fr-FR', {
                weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
            }),
            
            formatPrice: price => new Intl.NumberFormat('fr-FR', {
                style: 'currency', currency: 'EUR'
            }).format(price),
            
            validateEmail: email => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email),
            validatePhone: phone => /^[0-9+\-\s()]+$/.test(phone) && phone.length >= 10,
            
            debounce: (func, wait) => {
                let timeout;
                return (...args) => {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func(...args), wait);
                };
            },
            
            showToast: (message, type = 'success') => {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.textContent = message;
                document.body.appendChild(toast);
                setTimeout(() => toast.remove(), CONFIG.ui.toastDuration);
            },
            
            delay: ms => new Promise(resolve => setTimeout(resolve, ms)),
            generateId: () => Date.now().toString(36) + Math.random().toString(36).substr(2)
        };

        // Store optimis√© avec gestion d'√©tat simple
        class Store {
            constructor() {
                this.state = {
                    page: 'home',
                    lawyers: [],
                    appointment: {
                        lawyer: null,
                        date: null,
                        time: null
                    },
                    loading: false
                };
                this.listeners = new Set();
            }

            subscribe(fn) {
                this.listeners.add(fn);
                return () => this.listeners.delete(fn);
            }

            setState(updates) {
                this.state = { ...this.state, ...updates };
                this.listeners.forEach(fn => fn(this.state));
            }

            getState() {
                return this.state;
            }

            // Actions
            async loadLawyers() {
                if (this.state.lawyers.length) return;
                this.setState({ loading: true });
                await Utils.delay(CONFIG.api.delay);
                
                this.setState({
                    loading: false,
                    lawyers: [
                        {
                            id: '1',
                            name: 'Laurent Lefebvre',
                            specialties: ['Droit des affaires', 'Droit fiscal'],
                            bio: '20 ans d\'exp√©rience en conseil aux entreprises.',
                            rate: 450
                        },
                        {
                            id: '2',
                            name: 'Lucie Lambert',
                            specialties: ['Droit public', 'Droit administratif'],
                            bio: 'Experte en contentieux administratif.',
                            rate: 400
                        },
                        {
                            id: '3',
                            name: 'Alexandre Arnaud',
                            specialties: ['Droit du sport', 'Droit des affaires'],
                            bio: 'Sp√©cialiste du droit du sport.',
                            rate: 420
                        }
                    ]
                });
            }

            setAppointment(key, value) {
                this.setState({
                    appointment: { ...this.state.appointment, [key]: value }
                });
            }

            resetAppointment() {
                this.setState({
                    appointment: { lawyer: null, date: null, time: null }
                });
            }

            navigate(page) {
                this.setState({ page });
                window.scrollTo(0, 0);
            }
        }

        const store = new Store();

        // Composants optimis√©s
        class Component {
            constructor() {
                this.mounted = false;
            }

            mount(container) {
                container.innerHTML = this.render();
                this.attachEvents(container);
                this.mounted = true;
            }

            render() {
                return '';
            }

            attachEvents(container) {}
        }

        // Header avec menu mobile fonctionnel
        class Header extends Component {
            render() {
                const { page } = store.getState();
                
                return `
                    <header class="header">
                        <div class="container">
                            <nav class="nav">
                                <a href="#" class="nav-logo" data-link="home">${STRINGS.appName}</a>
                                
                                <ul class="nav-menu" id="navMenu">
                                    ${Object.entries(STRINGS.nav).map(([key, label]) => `
                                        <li>
                                            <a href="#" class="nav-link ${page === key ? 'active' : ''}"
                                               data-link="${key}">${label}</a>
                                        </li>
                                    `).join('')}
                                </ul>
                                
                                <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Menu">
                                    <span id="menuIcon">‚ò∞</span>
                                </button>
                            </nav>
                        </div>
                    </header>
                `;
            }

            attachEvents(container) {
                const navMenu = Utils.$('#navMenu');
                const mobileMenuBtn = Utils.$('#mobileMenuBtn');
                const menuIcon = Utils.$('#menuIcon');
                let isMenuOpen = false;

                // Toggle menu mobile
                mobileMenuBtn.addEventListener('click', () => {
                    isMenuOpen = !isMenuOpen;
                    navMenu.classList.toggle('active');
                    document.body.classList.toggle('menu-open');
                    menuIcon.textContent = isMenuOpen ? '‚úï' : '‚ò∞';
                });

                // Navigation
                Utils.$$('[data-link]', container).forEach(link => {
                    link.addEventListener('click', e => {
                        e.preventDefault();
                        const page = e.target.dataset.link;
                        
                        // Fermer le menu mobile
                        if (isMenuOpen) {
                            navMenu.classList.remove('active');
                            document.body.classList.remove('menu-open');
                            menuIcon.textContent = '‚ò∞';
                            isMenuOpen = false;
                        }
                        
                        store.navigate(page);
                    });
                });
            }
        }

        // Pages optimis√©es
        class HomePage extends Component {
            render() {
                return `
                    <div class="fade-in">
                        <section class="hero">
                            <div class="container">
                                <div class="hero-content">
                                    <div>
                                        <h1 class="hero-title">${STRINGS.hero.title}</h1>
                                        <p class="hero-subtitle">${STRINGS.hero.subtitle}</p>
                                        <div class="hero-buttons">
                                            <button class="btn btn-primary" data-action="appointment">
                                                ${STRINGS.hero.ctaPrimary}
                                            </button>
                                            <button class="btn btn-secondary" data-action="expertises">
                                                ${STRINGS.hero.ctaSecondary}
                                            </button>
                                        </div>
                                    </div>
                                    <div style="text-align: center; font-size: 8rem;">‚öñÔ∏è</div>
                                </div>
                            </div>
                        </section>

                        <section class="py-16">
                            <div class="container">
                                <h2 class="text-center mb-8">Nos domaines d'expertise</h2>
                                <div class="grid grid-3">
                                    ${Object.entries(STRINGS.expertises).map(([key, exp]) => `
                                        <div class="card expertise-card">
                                            <div class="expertise-icon">${{
                                                business: 'üíº',
                                                public: 'üèõÔ∏è',
                                                tax: 'üí∞',
                                                sports: '‚öΩ'
                                            }[key]}</div>
                                            <h3>${exp.title}</h3>
                                            <p style="color: var(--gray-3);">${exp.desc}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </section>
                    </div>
                `;
            }

            attachEvents(container) {
                Utils.$('[data-action="appointment"]', container).addEventListener('click', () => {
                    store.navigate('appointment');
                });
                
                Utils.$('[data-action="expertises"]', container).addEventListener('click', () => {
                    store.navigate('expertises');
                });
            }
        }

        class TeamPage extends Component {
            async render() {
                await store.loadLawyers();
                const { lawyers } = store.getState();
                
                return `
                    <div class="fade-in">
                        <section class="py-16">
                            <div class="container">
                                <h1 class="text-center mb-8">Notre √©quipe</h1>
                                <div class="grid grid-3">
                                    ${lawyers.map(lawyer => `
                                        <div class="card" style="padding: 1.5rem;">
                                            <div style="text-align: center; font-size: 4rem; margin-bottom: 1rem;">üë§</div>
                                            <h3>${lawyer.name}</h3>
                                            <p style="color: var(--accent); font-size: 0.9rem;">
                                                ${lawyer.specialties.join(' ‚Ä¢ ')}
                                            </p>
                                            <p style="color: var(--gray-3); margin: 1rem 0;">${lawyer.bio}</p>
                                            <p style="font-weight: 500;">
                                                Taux horaire : ${Utils.formatPrice(lawyer.rate)}
                                            </p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </section>
                    </div>
                `;
            }
        }

        class AppointmentPage extends Component {
            async render() {
                await store.loadLawyers();
                const { lawyers, appointment } = store.getState();
                
                return `
                    <div class="fade-in">
                        <section class="py-16">
                            <div class="container">
                                <h1 class="text-center mb-8">Prendre rendez-vous</h1>
                                
                                ${!appointment.lawyer ? `
                                    <h2 class="text-center mb-4">Choisissez votre avocat</h2>
                                    <div class="grid grid-3">
                                        ${lawyers.map(lawyer => `
                                            <div class="card" style="padding: 1.5rem; cursor: pointer;" 
                                                 data-lawyer="${lawyer.id}">
                                                <div style="text-align: center; font-size: 3rem;">üë§</div>
                                                <h3>${lawyer.name}</h3>
                                                <p style="color: var(--accent);">
                                                    ${lawyer.specialties.join(' ‚Ä¢ ')}
                                                </p>
                                            </div>
                                        `).join('')}
                                    </div>
                                ` : !appointment.date ? `
                                    <h2 class="text-center mb-4">S√©lectionnez une date</h2>
                                    <div class="calendar" style="max-width: 400px; margin: 0 auto;">
                                        <div class="calendar-grid">
                                            ${this.generateCalendar()}
                                        </div>
                                    </div>
                                    <div class="text-center mt-4">
                                        <button class="btn btn-secondary" data-back="lawyer">‚Üê Retour</button>
                                    </div>
                                ` : !appointment.time ? `
                                    <h2 class="text-center mb-4">Choisissez un horaire</h2>
                                    <div class="time-slots" style="max-width: 400px; margin: 0 auto;">
                                        ${['9:00', '10:00', '11:00', '14:00', '15:00', '16:00', '17:00']
                                            .map(time => `
                                                <div class="time-slot" data-time="${time}">${time}</div>
                                            `).join('')}
                                    </div>
                                    <div class="text-center mt-4">
                                        <button class="btn btn-secondary" data-back="date">‚Üê Retour</button>
                                    </div>
                                ` : `
                                    <div class="card" style="max-width: 500px; margin: 0 auto; padding: 2rem;">
                                        <h2 class="mb-4">Confirmer votre rendez-vous</h2>
                                        <p><strong>Avocat :</strong> ${lawyers.find(l => l.id === appointment.lawyer).name}</p>
                                        <p><strong>Date :</strong> ${Utils.formatDate(appointment.date)}</p>
                                        <p><strong>Heure :</strong> ${appointment.time}</p>
                                        
                                        <form id="confirmForm" class="mt-4">
                                            <div class="form-group">
                                                <label class="form-label">Nom complet *</label>
                                                <input type="text" class="form-input" name="name" required>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Email *</label>
                                                <input type="email" class="form-input" name="email" required>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">T√©l√©phone *</label>
                                                <input type="tel" class="form-input" name="phone" required>
                                            </div>
                                            <button type="submit" class="btn btn-primary" style="width: 100%;">
                                                Confirmer
                                            </button>
                                        </form>
                                        <button class="btn btn-secondary mt-4" data-back="time" style="width: 100%;">
                                            ‚Üê Retour
                                        </button>
                                    </div>
                                `}
                            </div>
                        </section>
                    </div>
                `;
            }

            generateCalendar() {
                const today = new Date();
                const days = [];
                for (let i = 0; i < 30; i++) {
                    const date = new Date(today);
                    date.setDate(today.getDate() + i);
                    const dateStr = date.toISOString().split('T')[0];
                    days.push(`
                        <div class="calendar-day" data-date="${dateStr}">
                            ${date.getDate()}
                        </div>
                    `);
                }
                return days.join('');
            }

            attachEvents(container) {
                // S√©lection avocat
                Utils.$$('[data-lawyer]', container).forEach(el => {
                    el.addEventListener('click', e => {
                        store.setAppointment('lawyer', e.currentTarget.dataset.lawyer);
                    });
                });

                // S√©lection date
                Utils.$$('[data-date]', container).forEach(el => {
                    el.addEventListener('click', e => {
                        store.setAppointment('date', e.target.dataset.date);
                    });
                });

                // S√©lection heure
                Utils.$$('[data-time]', container).forEach(el => {
                    el.addEventListener('click', e => {
                        store.setAppointment('time', e.target.dataset.time);
                    });
                });

                // Boutons retour
                Utils.$$('[data-back]', container).forEach(el => {
                    el.addEventListener('click', e => {
                        const step = e.target.dataset.back;
                        if (step === 'lawyer') store.setAppointment('lawyer', null);
                        else if (step === 'date') store.setAppointment('date', null);
                        else if (step === 'time') store.setAppointment('time', null);
                    });
                });

                // Confirmation
                const form = Utils.$('#confirmForm', container);
                if (form) {
                    form.addEventListener('submit', async e => {
                        e.preventDefault();
                        const data = new FormData(form);
                        
                        if (!Utils.validateEmail(data.get('email'))) {
                            Utils.showToast('Email invalide', 'error');
                            return;
                        }
                        
                        if (!Utils.validatePhone(data.get('phone'))) {
                            Utils.showToast('T√©l√©phone invalide', 'error');
                            return;
                        }
                        
                        Utils.showToast('Rendez-vous confirm√© !');
                        store.resetAppointment();
                        store.navigate('home');
                    });
                }
            }
        }

        class ContactPage extends Component {
            render() {
                return `
                    <div class="fade-in">
                        <section class="py-16">
                            <div class="container">
                                <h1 class="text-center mb-8">Contactez-nous</h1>
                                <div class="grid grid-2" style="max-width: 800px; margin: 0 auto;">
                                    <div>
                                        <form id="contactForm" class="card" style="padding: 2rem;">
                                            <div class="form-group">
                                                <label class="form-label">Nom *</label>
                                                <input type="text" class="form-input" name="name" required>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Email *</label>
                                                <input type="email" class="form-input" name="email" required>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Message *</label>
                                                <textarea class="form-textarea" name="message" rows="4" required></textarea>
                                            </div>
                                            <button type="submit" class="btn btn-primary" style="width: 100%;">
                                                Envoyer
                                            </button>
                                        </form>
                                    </div>
                                    <div>
                                        <div class="card" style="padding: 2rem;">
                                            <h3 class="mb-4">Coordonn√©es</h3>
                                            <p><strong>Adresse :</strong><br>
                                            123 Avenue des Champs-√âlys√©es<br>
                                            75008 Paris</p>
                                            <p class="mt-4"><strong>T√©l√©phone :</strong><br>
                                            +33 1 XX XX XX XX</p>
                                            <p class="mt-4"><strong>Email :</strong><br>
                                            contact@lla-avocats.fr</p>
                                            <p class="mt-4"><strong>Horaires :</strong><br>
                                            Lundi - Vendredi : 9h - 18h</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                `;
            }

            attachEvents(container) {
                const form = Utils.$('#contactForm', container);
                form.addEventListener('submit', e => {
                    e.preventDefault();
                    Utils.showToast('Message envoy√© avec succ√®s !');
                    form.reset();
                });
            }
        }

        class ExpertisesPage extends Component {
            render() {
                return `
                    <div class="fade-in">
                        <section class="py-16">
                            <div class="container">
                                <h1 class="text-center mb-8">Nos expertises</h1>
                                <div class="grid grid-2">
                                    ${Object.entries(STRINGS.expertises).map(([key, exp]) => `
                                        <div class="card" style="padding: 2rem;">
                                            <h2 class="mb-4">${exp.title}</h2>
                                            <p>${exp.desc}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </section>
                    </div>
                `;
            }
        }

        // Footer optimis√©
        class Footer extends Component {
            render() {
                return `
                    <footer class="footer">
                        <div class="container">
                            <div class="footer-content">
                                <div class="footer-section">
                                    <h4>LLA Avocats</h4>
                                    <p>Cabinet d'avocats d'affaires innovant bas√© √† Paris.</p>
                                </div>
                                <div class="footer-section">
                                    <h4>Contact</h4>
                                    <p>123 Avenue des Champs-√âlys√©es<br>75008 Paris</p>
                                </div>
                                <div class="footer-section">
                                    <h4>Horaires</h4>
                                    <p>Lundi - Vendredi<br>9h00 - 18h00</p>
                                </div>
                            </div>
                            <div class="text-center mt-8" style="opacity: 0.6;">
                                <p>¬© 2024 LLA Avocats. Tous droits r√©serv√©s.</p>
                            </div>
                        </div>
                    </footer>
                `;
            }
        }

        // Application principale optimis√©e
        class App {
            constructor() {
                this.components = {
                    header: new Header(),
                    footer: new Footer(),
                    pages: {
                        home: new HomePage(),
                        expertises: new ExpertisesPage(),
                        team: new TeamPage(),
                        appointment: new AppointmentPage(),
                        contact: new ContactPage()
                    }
                };
                
                this.root = Utils.$('#app');
            }

            init() {
                store.subscribe(() => this.render());
                this.render();
                
                window.addEventListener('popstate', e => {
                    if (e.state?.page) store.navigate(e.state.page);
                });
            }

            render() {
                const { page } = store.getState();
                
                this.root.innerHTML = `
                    <div id="header"></div>
                    <main id="main"></main>
                    <div id="footer"></div>
                `;
                
                this.components.header.mount(Utils.$('#header'));
                this.components.footer.mount(Utils.$('#footer'));
                
                const currentPage = this.components.pages[page] || this.components.pages.home;
                currentPage.mount(Utils.$('#main'));
                
                if (window.history.state?.page !== page) {
                    window.history.pushState({ page }, '', `#${page}`);
                }
            }
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', () => {
            const app = new App();
            app.init();
        });
    </script>
</body>
</html>
